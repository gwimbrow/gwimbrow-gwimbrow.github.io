<!--

      (\ /)
    __(0\0)
 ~{@)#`{^}
  ?? !!

-->
<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <title>Journal</title>
    <link rel="stylesheet" href="styles/normalize.css">
    <link rel="stylesheet" href="styles/styles.css">
    <script src="bower_components/jquery/dist/jquery.min.js"></script>
    <script src="bower_components/lodash/lodash.js"></script>
  </head>
  <body>
    <div id="scene">
	    <div id="skybox">
	      <div class="cube-face cube-face-front"></div>
	      <div class="cube-face cube-face-back"></div>
	      <div class="cube-face cube-face-left"></div>
	      <div class="cube-face cube-face-right"></div>
	      <div class="cube-face cube-face-top"></div>
	      <div class="cube-face cube-face-bottom"></div>
	    </div>
    </div>
    <script>

      let x = 0;
      let y = 0;

      const trace = _.throttle(e => {

        x += e.movementX;
        y += e.movementY;

        $('#skybox').css('transform', `rotateY(${x}deg)`);
        $('#scene').css('transform', `translateZ(1024px) rotateX(${y}deg)`);

      }, 125);

      document.body.addEventListener('click', function () {
        this.requestPointerLock();
      });

      document.addEventListener('pointerlockchange', function () {
        if (this.pointerLockElement === document.body) {
          document.body.addEventListener("mousemove", trace);
        } else {
          document.body.removeEventListener('mousemove', trace);
        }
      });

	</script>
  </body>
</html>